<div id="admin-users">
  <h1>User Management</h1>
  
  {{#if error}}
    <div class="mytextcard" style="background-color: #ff4444; color: white; margin-bottom: 20px;">
      <p>{{error}}</p>
    </div>
  {{/if}}

  {{#if success}}
    <div class="mytextcard" style="background-color: #44ff44; color: white; margin-bottom: 20px;">
      <p>{{success}}</p>
    </div>
  {{/if}}

  <div class="mytextcard">
    <h2>{{#if editUser}}Edit User{{else}}Create New User{{/if}}</h2>
    <form action="{{#if editUser}}/admin/users/update/{{editUser.userId}}{{else}}/admin/users/create{{/if}}" method="POST">
      <div class="form-group">
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" value="{{#if editUser}}{{editUser.username}}{{/if}}" required>
      </div>
      
      <div class="form-group">
        <label for="password">Password:{{#if editUser}} (leave blank to keep current){{/if}}</label>
        <input type="password" id="password" name="password" {{#unless editUser}}required{{/unless}}>
      </div>
      
      <div class="form-group">
        <label>
          <input type="checkbox" name="isAdmin" {{#if editUser}}{{#if editUser.isAdmin}}checked{{/if}}{{/if}}>
          Admin User
        </label>
      </div>
      
      <div class="form-actions">
        <button type="submit" class="btn-primary">{{#if editUser}}Update User{{else}}Create User{{/if}}</button>
        {{#if editUser}}
          <a href="/admin/users" class="btn-secondary">Cancel</a>
        {{/if}}
      </div>
    </form>
  </div>

  <div class="mytextcard" style="margin-top: 30px;">
    <h2>All Users</h2>
    {{#if users}}
      <table class="users-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Admin</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {{#each users}}
            <tr>
              <td>{{this.userId}}</td>
              <td>{{this.username}}</td>
              <td>{{#if this.isAdmin}}Yes{{else}}No{{/if}}</td>
              <td class="actions">
                <a href="/admin/users/edit/{{this.userId}}" class="btn-edit">Edit</a>
                <form action="/admin/users/delete/{{this.userId}}" method="POST" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this user?');">
                  <button type="submit" class="btn-delete">Delete</button>
                </form>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    {{else}}
      <p>No users found.</p>
    {{/if}}
  </div>
</div>
